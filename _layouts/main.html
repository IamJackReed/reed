---
layout: compress
---

<!DOCTYPE html>
<html lang="{{ site.language }}" class="no-js">
  {% include head.html %}

  <body class="main-page has-push-menu">
    <!-- Persistent fallback overlay: shown by default until acceptance is stored -->
    <div id="disclaimer-overlay">
      <div class="disclaimer-overlay-card">
        <h2>Before we continue</h2>
        <p>This site shares opinions and experiments. Nothing here is advice.</p>
        <div class="disclaimer-overlay-actions">
          <a id="disclaimer-accept-overlay" class="disclaimer-accept-overlay" href="{{ site.baseurl }}/?accept=1" role="button">
            I Understand &amp; Agree
          </a>
          <a id="disclaimer-read-overlay" href="{{ site.baseurl }}/disclaimer/">Read full disclaimer</a>
        </div>
        <p style="margin-top:0.75rem;font-size:0.85rem;color:#aaa;">Youâ€™ll return to your page after accepting.</p>
      </div>
    </div>
    <script>
      (function () {
        var root = document.documentElement;
        var overlay = document.getElementById("disclaimer-overlay");
        var readLink = document.getElementById("disclaimer-read-overlay");
        var acceptBtn = document.getElementById("disclaimer-accept-overlay");
        if (!overlay) return;

        var base = "{{ site.baseurl }}";
        var returnTo = window.location.pathname + window.location.search + window.location.hash;

        function hasAcceptedInline() {
          var ok = false;
          try { ok = localStorage.getItem("reedDisclaimerAccepted") === "true"; } catch (e) {}
          if (!ok) {
            try {
              ok = document.cookie.split(";").map(function (c) { return c.trim().toLowerCase(); }).some(function (c) { return c === "reeddisclaimeraccepted=true"; });
            } catch (e) {}
          }
          return ok;
        }

        function acceptAndProceed(targetUrl) {
          try { localStorage.setItem("reedDisclaimerAccepted", "true"); } catch (e) {}
          try { document.cookie = "reedDisclaimerAccepted=true; path={{ site.baseurl | default: '/' }}; max-age=31536000"; } catch (e) {}
          root.classList.add("disclaimer-clear");
          overlay.style.display = "none";
          if (targetUrl) {
            window.location.href = targetUrl;
          }
        }

        // handle accept=1 in URL immediately
        try {
          var p = new URLSearchParams(window.location.search);
          if (p.get("accept") === "1") {
            var dest = p.get("return") || (base + "/");
            p.delete("accept");
            p.delete("return");
            var cleaned = window.location.pathname + (p.toString() ? "?" + p.toString() : "") + window.location.hash;
            try { window.history.replaceState({}, "", cleaned); } catch (e) {}
            acceptAndProceed(dest);
            return;
          }
        } catch (e) {}

        // If already accepted (head script sets class), hide overlay
        if (root.classList.contains("disclaimer-clear") || document.body.classList.contains("disclaimer-page") || hasAcceptedInline()) {
          overlay.style.display = "none";
          return;
        }

        if (readLink) {
          readLink.href = "{{ site.baseurl }}/disclaimer/?return=" + encodeURIComponent(returnTo);
        }

        if (acceptBtn) {
          // Always send them through the same URL with an accept=1 param so the head script can persist it.
          try {
            var params = new URLSearchParams(window.location.search);
            params.set("accept", "1");
            params.set("return", returnTo || (base + "/"));
            acceptBtn.href = window.location.pathname + "?" + params.toString() + window.location.hash;
          } catch (e) {
            var fallback = returnTo || (base + "/");
            acceptBtn.href = (fallback || "/") + (fallback.indexOf("?") >= 0 ? "&accept=1" : "?accept=1");
          }
        }
      })();
    </script>

    {% include svg-icons.html %}
    {% include header.html %}

    <section class="content">
      {{ content }}
    </section>

    {% include footer.html %}

    <!-- Theme core JS (menu toggle, search overlay, preload images, etc.) -->
    <script src="{{ site.baseurl }}/assets/js/scripts.min.js"></script>

    <!-- Exploding head nav behavior -->
    <script src="{{ site.baseurl }}/assets/js/exploding-nav.js"></script>

    <!-- Netlify Identity (login redirect for /admin) -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", function(user) {
          if (!user) {
            window.netlifyIdentity.on("login", function() {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
