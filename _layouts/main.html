---
layout: compress
---

<!DOCTYPE html>
<html lang="{{ site.language }}" class="no-js">
  {% include head.html %}

  <script>
    (function () {
      var accepted = false;

      // 1. Check if user already agreed
      try {
        accepted = localStorage.getItem('reedDisclaimerAccepted') === 'true';
      } catch (e) {
        accepted = false;
      }

      // 2. Figure out where we are
      var base = "{{ site.baseurl }}"; // "/reed" on GitHub Pages, "" locally
      var path = window.location.pathname;

      // remove base prefix if present
      if (base && path.indexOf(base) === 0) {
        path = path.slice(base.length);
      }

      var onDisclaimer =
        path === "/disclaimer" ||
        path === "/disclaimer/";

      // 3. If NOT accepted and NOT already on disclaimer -> bounce to disclaimer
      if (!accepted && !onDisclaimer) {
        window.location.replace(base + "/disclaimer/");
        return;
      }

      // 4. If we're ON the disclaimer page and they haven't accepted yet,
      // mark the <body> so we can hide header/footer with CSS.
      if (!accepted && onDisclaimer) {
        document.addEventListener("DOMContentLoaded", function () {
          document.body.classList.add("disclaimer-mode");
        });
      }
    })();
  </script>

  <body class="main-page has-push-menu">
    {% include header.html %}

    <section class="content">
      {{ content }}
    </section>

    {% include footer.html %}

    <!-- Theme core JS (menu toggle, search overlay, preload images, etc.) -->
    <script src="{{ site.baseurl }}/assets/js/scripts.min.js"></script>

    <!-- Exploding head nav behavior -->
    <script src="{{ site.baseurl }}/assets/js/exploding-nav.js"></script>

    <!-- Netlify Identity (login redirect for /admin) -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", function(user) {
          if (!user) {
            window.netlifyIdentity.on("login", function() {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
